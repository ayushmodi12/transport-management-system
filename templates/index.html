<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Available Buses</title>
</head>
<body>
    <h1>Available Buses</h1>
    <br>
        {% for bus in buses %}
            <li>
                <strong>License Plate Number:</strong> {{ bus[0] }}<br>
                <strong>Capacity:</strong> {{ bus[1] }}<br>
                <strong>Owner First Name:</strong> {{ bus[2] }}<br>
                <strong>Owner Last Name:</strong> {{ bus[3] }}<br>
                <strong>Vehicle Type:</strong> {{ bus[4] }}<br>
                <!-- <a href="/book/{{ bus[0] }}">Book Seat</a><br> -->
                <a href="#" class="book-seat" data-licence-plate="{{ bus[0] }}">Book Seat</a><br>
            </li>
        {% endfor %}
    </ul>
    <script>
        // Add event listener to all 'Book Seat' links
        document.querySelectorAll('.book-seat').forEach(function(link) {
            link.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default link behavior
                const licencePlateNumber = this.dataset.licencePlate; // Get licence plate number from data attribute
                // Redirect to seat selection page with licence_plate_number as query parameter
                window.location.href = `{{ url_for('seat_selection') }}?licence_plate_number=${licencePlateNumber}`;
            });
        });
    </script>
</body>
</html>
